xpathApply(ns[[1]], "//city", xmlValue, recursive = FALSE)
as.numeric(xpathApply(ns[[1]], "//sequence", xmlValue, recursive = FALSE))
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
?getNodeSet
zz <- htmlParse('sample_filing.ori')
# ns <- getNodeSet(zz, "//html/body/sec-document/document/type/sequence")
ns <- getNodeSet(zz, "//html/body/sec-document/document")
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//relatedPersonsList", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//relatedPersonsList", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//relatedPersonsList", xmlValue)
xpathApply(ns[[1]], "//relatedpersonslist", xmlValue)
xpathApply(ns[[1]], "//relatedpersonslist", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//relatedpersonslist", xmlValue)
xpathApply(ns[[1]], "//relatedpersonname", xmlValue)
xpathApply(ns[[1]], "//relatedpersonname/firstname", xmlValue)
xpathApply(ns[[1]], "//relatedpersonname/lastname", xmlValue)
unlist(xpathApply(ns[[1]], "//relatedpersonname/lastname", xmlValue))
zz <- htmlParse('sample_filing.ori')
# ns <- getNodeSet(zz, "//html/body/sec-document/document/type/sequence")
ns <- getNodeSet(zz, "//html/body/sec-document/document")
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
zz <- htmlParse('sample_filing.ori')
# ns <- getNodeSet(zz, "//html/body/sec-document/document/type/sequence")
ns <- getNodeSet(zz, "//html/body/sec-document/document")
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
unlist(xpathApply(ns[[1]], "//relatedpersonname/lastname", xmlValue))
zz <- htmlParse('sample_filing.ori')
# ns <- getNodeSet(zz, "//html/body/sec-document/document/type/sequence")
ns <- getNodeSet(zz, "//html/body/sec-document/document")
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
unlist(xpathApply(ns[[1]], "//relatedpersonrelationshiplist/lastname", xmlValue))
zz <- htmlParse('sample_filing.ori')
# ns <- getNodeSet(zz, "//html/body/sec-document/document/type/sequence")
ns <- getNodeSet(zz, "//html/body/sec-document/document")
xpathApply(ns[[1]], "//entityname", xmlValue, recursive = FALSE)
unlist(xpathApply(ns[[1]], "//relatedpersonrelationshiplist", xmlValue))
install.packages(c("boot", "classInt", "dbplyr", "ggforce", "ISOcodes", "sf", "shiny", "sys", "testthat"))
version
as.data.frame(installed.packages()[,c(1,3:4)])
as.data.frame(installed.packages()[,1])
as.data.frame(installed.packages()
)
as.data.frame(installed.packages())
as.data.frame(installed.packages()))arownames()
as.data.frame(installed.packages())
rownames(as.data.frame(installed.packages()))
installed_packages <- rownames(as.data.frame(installed.packages()))
write.rds(installed_packages, 'installed_packages.rds')
saveRDS(installed_packages, 'installed_packages.rds')
xpathApply(ns[[1]], "//industrugrouptype", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
filings
filings
filings <- readRDS('filings.rds')
filings
filings
library(data.table)
baseurl <- 'https://www.sec.gov/Archives/'
function getFilingDetail(form_d_file) {
remoteFile <- paste(baseurl, form_d_file)
zz <- htmlParse(remoteFile)
ns <- getNodeSet(zz, "//html/body/sec-document/document")
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
return(industryGroupType)
}
function getFilingDetail(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- htmlParse(remoteFile)
ns <- getNodeSet(zz, "//html/body/sec-document/document")
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
return(industryGroupType)
}
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- htmlParse(remoteFile)
ns <- getNodeSet(zz, "//html/body/sec-document/document")
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
return(industryGroupType)
}
filings$V5[1:10]
getFilingDetail(filings$V5[1:10])
getFilingDetail(filings$V5[1])
htmlParse(filings$V5[1])
baseurl <- 'https://www.sec.gov/Archives/'
remoteFile <- paste(baseurl, filings$V5[1000], sep = '')
remoteFile
htmlParse(remoteFile)
?htmlParse
htmlParse('sample_filing.ori')
filings
xx
x
getFilingDetail(x$V5[1])
x$V5[1]
getFilingDetail(x$V5[1000])
remoteFile <- paste(baseurl, x$V5[1000], sep = '')
htmlParse(remotefile)
remoteFile
htmlParse(remoteFile)
htmlParse('sample_filing.ori')
download.file('https://www.sec.gov/Archives/edgar/data/1745524/0001745524-18-000001.txt', 'sample_filing.raw')
htmlParse('sample_filing.raw')
download.file('https://www.sec.gov/Archives/edgar/data/1456986/0000919574-09-006093.txt', 'filing_with_privacy.txt')
?htmlParse
?gsub()
getPrimaryDocUrl <- function(original_file_name) {
original_file_name <- gsub('-', '', original_file_name)
primaryDocUrl <- gsub('\.txt', '/primary_doc.xml', original_file_name)
return(primaryDocUrl)
}
getPrimaryDocUrl <- function(original_file_name) {
original_file_name <- gsub('-', '', original_file_name)
primaryDocUrl <- gsub('.txt', '/primary_doc.xml', original_file_name)
return(primaryDocUrl)
}
getPrimaryDocUrl(x$V5[1])
getPrimaryDocUrl(x$V5[1:10])
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- htmlParse(remoteFile)
ns <- getNodeSet(zz, "//html/body/sec-document/document")
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
return(industryGroupType)
}
getFilingDetail(x$V5[1])
form_d_file <- getPrimaryDocUrl(x$V5[1])
remoteFile <- paste(baseurl, form_d_file, sep = '')
remoteFile
zz <- htmlParse(remoteFile)
zz <- xmlParse(remoteFile)
download.file(remoteFile, 'primary_doc.xml')
zz <- xmlParse('primary_doc.xml')
zz
ns <- getNodeSet(zz, "//html/body/sec-document/document")
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
ns
ns <- getNodeSet(zz, "//edgarsubmission")
ns
industryGroupType <- xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns, "//industrygrouptype", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[1], "//industrygrouptype", xmlValue, recursive = FALSE)
class(ns)
class(ns[1])
ns[1]
ns
?getNodeSet
ns <- getNodeSet(zz)
class(zz)
xpathApply(zz, "//industrygrouptype", xmlValue, recursive = FALSE)
zz
xpathApply(zz, "//entitytype", xmlValue, recursive = FALSE)
xpathApply(zz, "//edgarsubmission", xmlValue, recursive = FALSE)
zz
zz <- xmlParse('primary_doc.xml')
zz
class(zzz)
class(zz)
xmlGetAttr(zz, 'industrygrouptype')
getNodeSet(zz)
getNodeSet(zz, '//')
getNodeSet(zz, '/')
ns <- getNodeSet(zz, '/')
ns
ns[[1]]
xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
xpathApply(ns[1], "//industrygrouptype", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//industrygrouptype", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "industrygrouptype", xmlValue, recursive = FALSE)
ns
xpathApply(ns[[1]], "industryGroupType", xmlValue, recursive = FALSE)
xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
unlist(xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE))
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- htmlParse(remoteFile)
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[1])
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- xmlParse(remoteFile)
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[1])
?xmlParse
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- xmlParse(remoteFile, isURL = TRUE)
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[1])
getFilingDetail <- function(form_d_file) {
baseurl <- 'http://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
zz <- xmlParse(remoteFile, isURL = TRUE)
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[1])
download.file('http://www.sec.gov/Archives/edgar/data/1171623/000117162315000001/primary_doc.xml')
read.file('http://www.sec.gov/Archives/edgar/data/1171623/000117162315000001/primary_doc.xml')
?readLines
?download.file
getFilingDetail(x$V5[1])
getFilingDetail <- function(form_d_file) {
baseurl <- 'https://www.sec.gov/Archives/'
form_d_file <- getPrimaryDocUrl(form_d_file)
remoteFile <- paste(baseurl, form_d_file, sep = '')
# zz <- xmlParse(remoteFile, isURL = TRUE)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[1])
library(httr)
getFilingDetail(x$V5[1])
getFilingDetail(x$V5[1:100])
for(file in x$V5[1:100]) { getFilingDetail(file) }
for(file in x$V5[1:100]) { print(getFilingDetail(file)) }
library(xml2)
xml_2 <- read_xml('https://www.sec.gov/Archives/edgar/data/1171623/000117162315000001/primary_doc.xml')
xml_2
xml_find_all(xml_2, 'entityName')
xml_find_all(xml_2, './/entityName')
xml_attr(xml_2, './/entityName')
?xml_attr
xml_attr(xml_2, 'entityName')
xml_attr(xml_2, 'testOrLive')
xml_attr(xml_2, 'primaryIssuer')
xml_attr(xml_2, '//primaryIssuer')
xml_attr(xml_2, './/primaryIssuer')
xml_attr(xml_2, '/primaryIssuer')
xml_attr(xml_2[4], 'primaryIssuer')
xml_2
for(file in x$V5[299000:299100]) { print(getFilingDetail(file)) }
getPrimaryDocUrl(x$V5[295000])
getPrimaryDocUrl <- function(original_file_name) {
baseurl <- 'https://www.sec.gov/Archives/'
original_file_name <- gsub('-', '', original_file_name)
primaryDocUrl <- gsub('.txt', '/primary_doc.xml', original_file_name)
primaryDocUrl <- paste(baseurl, primaryDocUrl, sep = '')
return(primaryDocUrl)
}
getPrimaryDocUrl(x$V5[295000])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//industryGroupType", xmlValue, recursive = FALSE)
return(unlist(industryGroupType))
}
for(file in x$V5[297000:297100]) { print(getFilingDetail(file)) }
getPrimaryDocUrl(x$V5[295900])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup/industryGroupType", xmlValue, recursive = FALSE)
# /primaryIssuer/issuerAddress/stateOrCountry
return(unlist(industryGroupType))
}
for(file in x$V5[298000:29810]) { print(getFilingDetail(file)) }
for(file in x$V5[299000:299010]) { print(getFilingDetail(file)) }
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = TRUE)
# /primaryIssuer/issuerAddress/stateOrCountry
return(unlist(industryGroupType))
}
for(file in x$V5[299000:299005]) { print(getFilingDetail(file)) }
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
# /primaryIssuer/issuerAddress/stateOrCountry
return(unlist(industryGroupType))
}
for(file in x$V5[299000:299005]) { print(getFilingDetail(file)) }
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = TRUE)
# /primaryIssuer/issuerAddress/stateOrCountry
return(unlist(industryGroupType))
}
for(file in x$V5[298000:298005]) { print(getFilingDetail(file)) }
form_d_file <- 'https://www.sec.gov/Archives/edgar/data/1711730/000171173017000001/primary_doc.xml'
zz <- xmlParse(rawToChar(GET(remoteFile)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = TRUE)
unlist(industryGroupType)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = TRUE)
unlist(industryGroupType)
industryGroupType
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = TRUE)
industryGroupType
unlist(industryGroupType)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/federalExemptionExclusions", xmlValue, recursive = TRUE)
unlist(industryGroupType)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions", xmlValue, recursive = TRUE)
unlist(industryGroupType)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions", xmlValue)
industryGroupType
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
industryGroupType <- xpathApply(zz, "//offeringData/federalExemptionsExclusions", xmlValue)
industryGroupType
zz <- xmlTreeParse(rawToChar(GET(form_d_file)$content))
industryGroupType <- xpathApply(zz, "//offeringData/federalExemptionsExclusions", xmlValue)
zz <- xmlTreeParse(rawToChar(GET(form_d_file)$content), useInternalNodes = TRUE)
industryGroupType <- xpathApply(zz, "//offeringData/federalExemptionsExclusions", xmlValue)
industryGroupType
industryGroupType <- xpathApply(zz, "//offeringData/federalExemptionsExclusions/item", xmlValue)
industryGroupType
unlist(industryGroupType)
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
issuerName <- xpathApply(ns[[1]], "//primaryIssuer/entityName", xmlValue, recursive = TRUE)
issuerState <- xpathApply(ns[[1]], "//primaryIssuer/stateOrCountry", xmlValue, recursive = TRUE)
issuerZip <- xpathApply(ns[[1]], "//primaryIssuer/zipCode", xmlValue, recursive = TRUE)
issuerEntityType <- xpathApply(ns[[1]], "//primaryIssuer/entityType", xmlValue, recursive = TRUE)
issuerEntityTypeOtherDesc <- xpathApply(ns[[1]], "//primaryIssuer/entityTypeOtherDesc", xmlValue, recursive = TRUE)
industryGroup <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroupType", xmlValue, recursive = TRUE)
revenueRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/revenueRange", xmlValue, recursive = FALSE)
navRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/aggregateNetAssetValueRange", xmlValue, recursive = FALSE)
federalExemptionsExclusions <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions/item", xmlValue, recursive = TRUE)
newOrAmendment <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment", xmlValue, recursive = FALSE)
durationOfOffering <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/durationOfOffering", xmlValue, recursive = FALSE)
equityOfSecuritiesOffered <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isEquityType", xmlValue, recursive = FALSE)
# need to find other types as well
return(unlist(industryGroupType))
}
getFilingDetail(x$V5[100000:100005])
getFilingDetail(x$V5[100000])
x$V5[100000]
getFilingDetail(x$V5[100000])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
issuerName <- xpathApply(ns[[1]], "//primaryIssuer/entityName", xmlValue, recursive = TRUE)
issuerState <- xpathApply(ns[[1]], "//primaryIssuer/stateOrCountry", xmlValue, recursive = TRUE)
issuerZip <- xpathApply(ns[[1]], "//primaryIssuer/zipCode", xmlValue, recursive = TRUE)
issuerEntityType <- xpathApply(ns[[1]], "//primaryIssuer/entityType", xmlValue, recursive = TRUE)
issuerEntityTypeOtherDesc <- xpathApply(ns[[1]], "//primaryIssuer/entityTypeOtherDesc", xmlValue, recursive = TRUE)
industryGroup <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroupType", xmlValue, recursive = TRUE)
revenueRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/revenueRange", xmlValue, recursive = FALSE)
navRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/aggregateNetAssetValueRange", xmlValue, recursive = FALSE)
federalExemptionsExclusions <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions/item", xmlValue, recursive = TRUE)
newOrAmendment <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment", xmlValue, recursive = FALSE)
durationOfOffering <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/durationOfOffering", xmlValue, recursive = FALSE)
equityOfSecuritiesOffered <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isEquityType", xmlValue, recursive = FALSE)
print(issuerName)
print(issuerState)
print(issuerZip)
print(issuerEntityType)
print(issuerEntityTypeOtherDesc)
print(industryGroup)
print(industryGroupType)
print(revenueRange)
print(navRange)
print(federalExemptionsExclusions)
print(newOrAmendment)
print(durationOfOffering)
print(equityOfSecuritiesOffered)
# need to find other types as well
# return(unlist(industryGroupType))
}
getFilingDetail(x$V5[100000])
getPrimaryDocUrll(x$V5[100000])
getPrimaryDocUrl(x$V5[100000])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
issuerName <- xpathApply(ns[[1]], "//primaryIssuer/entityName", xmlValue, recursive = TRUE)
issuerState <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/stateOrCountry", xmlValue, recursive = TRUE)
issuerZip <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/zipCode", xmlValue, recursive = TRUE)
issuerEntityType <- xpathApply(ns[[1]], "//primaryIssuer/entityType", xmlValue, recursive = TRUE)
issuerEntityTypeOtherDesc <- xpathApply(ns[[1]], "//primaryIssuer/entityTypeOtherDesc", xmlValue, recursive = TRUE)
industryGroup <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup/industryGroupType", xmlValue, recursive = TRUE)
revenueRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/revenueRange", xmlValue, recursive = FALSE)
navRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/aggregateNetAssetValueRange", xmlValue, recursive = FALSE)
federalExemptionsExclusions <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions/item", xmlValue, recursive = TRUE)
newOrAmendment <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment/isAmendment", xmlValue, recursive = FALSE)
durationOfOfferingMoreThanOneYear <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/durationOfOffering/moreThannOneYear", xmlValue, recursive = FALSE)
equityOfSecuritiesOffered <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isEquityType", xmlValue, recursive = FALSE)
print(issuerName)
print(issuerState)
print(issuerZip)
print(issuerEntityType)
print(issuerEntityTypeOtherDesc)
print(industryGroup)
print(industryGroupType)
print(revenueRange)
print(navRange)
print(federalExemptionsExclusions)
print(newOrAmendment)
print(durationOfOfferingMoreThanOneYear)
print(equityOfSecuritiesOffered)
# need to find other types as well
# return(unlist(industryGroupType))
}
getPrimaryDocUrl(x$V5[100000])
getFilingDetail(x$V5[100000])
getFilingDetail(x$V5[100010])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
issuerName <- xpathApply(ns[[1]], "//primaryIssuer/entityName", xmlValue, recursive = TRUE)
issuerState <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/stateOrCountry", xmlValue, recursive = TRUE)
issuerZip <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/zipCode", xmlValue, recursive = TRUE)
issuerEntityType <- xpathApply(ns[[1]], "//primaryIssuer/entityType", xmlValue, recursive = TRUE)
issuerEntityTypeOtherDesc <- xpathApply(ns[[1]], "//primaryIssuer/entityTypeOtherDesc", xmlValue, recursive = TRUE)
industryGroup <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup/industryGroupType", xmlValue, recursive = TRUE)
revenueRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/revenueRange", xmlValue, recursive = FALSE)
navRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/aggregateNetAssetValueRange", xmlValue, recursive = FALSE)
federalExemptionsExclusions <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions/item", xmlValue, recursive = TRUE)
newOrAmendment <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment/isAmendment", xmlValue, recursive = FALSE)
durationOfOfferingMoreThanOneYear <- xpathApply(ns[[1]], "//offeringData/durationOfOffering/moreThannOneYear", xmlValue, recursive = FALSE)
equityOfSecuritiesOffered <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isEquityType", xmlValue, recursive = FALSE)
typesOfSecuritiesOfferedOtherDescription <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isOtherType/descriptionOfOtherType", xmlValue, recursive = FALSE)
print(issuerName)
print(issuerState)
print(issuerZip)
print(issuerEntityType)
print(issuerEntityTypeOtherDesc)
print(industryGroup)
print(industryGroupType)
print(revenueRange)
print(navRange)
print(federalExemptionsExclusions)
print(newOrAmendment)
print(durationOfOfferingMoreThanOneYear)
print(equityOfSecuritiesOffered)
print(typesOfSecuritiesOfferedOtherDescription)
# need to find other types as well
# return(unlist(industryGroupType))
}
getFilingDetail(x$V5[100010])
getPrimaryDocUrl(x$V5[100010])
getFilingDetail <- function(form_d_file) {
form_d_file <- getPrimaryDocUrl(form_d_file)
zz <- xmlParse(rawToChar(GET(form_d_file)$content))
ns <- getNodeSet(zz, "/")
issuerName <- xpathApply(ns[[1]], "//primaryIssuer/entityName", xmlValue, recursive = TRUE)
issuerState <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/stateOrCountry", xmlValue, recursive = TRUE)
issuerZip <- xpathApply(ns[[1]], "//primaryIssuer/issuerAddress/zipCode", xmlValue, recursive = TRUE)
issuerEntityType <- xpathApply(ns[[1]], "//primaryIssuer/entityType", xmlValue, recursive = TRUE)
issuerEntityTypeOtherDesc <- xpathApply(ns[[1]], "//primaryIssuer/entityTypeOtherDesc", xmlValue, recursive = TRUE)
industryGroup <- xpathApply(ns[[1]], "//offeringData/industryGroup", xmlValue, recursive = FALSE)
industryGroupType <- xpathApply(ns[[1]], "//offeringData/industryGroup/industryGroupType", xmlValue, recursive = TRUE)
revenueRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/revenueRange", xmlValue, recursive = FALSE)
navRange <- xpathApply(ns[[1]], "//offeringData/issuerSize/aggregateNetAssetValueRange", xmlValue, recursive = FALSE)
federalExemptionsExclusions <- xpathApply(ns[[1]], "//offeringData/federalExemptionsExclusions/item", xmlValue, recursive = TRUE)
newOrAmendment <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment/isAmendment", xmlValue, recursive = FALSE)
previousAccessionNumber <- xpathApply(ns[[1]], "//offeringData/typeOfFiling/newOrAmendment/previousAccessionNumber", xmlValue, recursive = FALSE)
durationOfOfferingMoreThanOneYear <- xpathApply(ns[[1]], "//offeringData/durationOfOffering/moreThanOneYear", xmlValue, recursive = FALSE)
equityOfSecuritiesOffered <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isEquityType", xmlValue, recursive = FALSE)
typesOfSecuritiesOfferedOtherDescription <- xpathApply(ns[[1]], "//offeringData/typesOfSecuritiesOffered/isOtherType/descriptionOfOtherType", xmlValue, recursive = FALSE)
print(issuerName)
print(issuerState)
print(issuerZip)
print(issuerEntityType)
print(issuerEntityTypeOtherDesc)
print(industryGroup)
print(industryGroupType)
print(revenueRange)
print(navRange)
print(federalExemptionsExclusions)
print(newOrAmendment)
print(durationOfOfferingMoreThanOneYear)
print(equityOfSecuritiesOffered)
print(typesOfSecuritiesOfferedOtherDescription)
# need to find other types as well
# return(unlist(industryGroupType))
}
getFilingDetail(x$V5[100010])
